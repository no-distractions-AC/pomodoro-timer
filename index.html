<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Pomodoro Timer - A productivity timer with task tracking using the 25/5/15 technique">
  <meta name="theme-color" content="#0f1419">
  <title>Pomodoro Timer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Header with toggles -->
  <header class="header">
    <div class="header-left">
      <span class="logo">pomodoro</span>
    </div>
    <div class="header-toggles">
      <button class="toggle-btn" id="sound-toggle" aria-label="Toggle sound" title="Toggle sound (M)">
        <svg class="icon icon-sound-on" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 18V6l7-4v20l-7-4z"/>
          <path d="M19 6c2 2 2 10 0 12"/>
        </svg>
        <svg class="icon icon-sound-off" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none">
          <path d="M9 18V6l7-4v20l-7-4z"/>
          <path d="M19 8l4 4m0-4l-4 4"/>
        </svg>
      </button>
      <button class="toggle-btn" id="theme-toggle" aria-label="Toggle theme" title="Toggle theme (T)">
        <svg class="icon icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
        </svg>
        <svg class="icon icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none">
          <circle cx="12" cy="12" r="5"/>
          <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
        </svg>
        <svg class="icon icon-focus" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display:none">
          <circle cx="12" cy="12" r="10"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- Main content -->
  <main class="main">
    <div class="main-grid">
      <!-- Left: Timer Section -->
      <section class="timer-section" aria-label="Timer">
        <!-- Circular Progress Ring -->
        <div class="timer-container" id="timer-container">
          <svg class="progress-ring" viewBox="0 0 200 200" aria-hidden="true">
            <circle class="progress-ring-bg" cx="100" cy="100" r="90" />
            <circle class="progress-ring-progress" cx="100" cy="100" r="90" />
          </svg>
          <div class="timer-display">
            <time class="timer-time" id="timer-time" aria-live="polite">25:00</time>
            <div class="timer-label" id="timer-label">Work</div>
            <div class="timer-session" id="timer-session">Session 1 of 4</div>
          </div>
        </div>

        <!-- Session Calendar View -->
        <div class="session-calendar" aria-label="Session progress">
          <div class="session-dot" data-session="1"></div>
          <div class="session-dot" data-session="2"></div>
          <div class="session-dot" data-session="3"></div>
          <div class="session-dot" data-session="4"></div>
        </div>

        <!-- Timer Controls -->
        <div class="timer-controls">
          <button class="control-btn control-btn-primary" id="start-btn" aria-label="Start timer">
            Start
          </button>
          <button class="control-btn" id="skip-btn" aria-label="Skip to next session" title="Skip (N)">
            Skip
          </button>
          <button class="control-btn" id="reset-btn" aria-label="Reset current session" title="Reset (R)">
            Reset
          </button>
          <button class="control-btn" id="stop-btn" aria-label="Stop timer completely" title="Stop (S)">
            Stop
          </button>
        </div>

        <!-- Settings Button -->
        <button class="settings-btn" id="customize-btn" aria-label="Settings" title="Settings (C)">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/>
          </svg>
          <span>Settings</span>
        </button>
      </section>

      <!-- Right: Task & Stats Section -->
      <div class="side-section">
        <!-- Task Section -->
        <section class="task-section" aria-label="Tasks">
          <div class="section-header">
            <h2 class="section-title">Tasks</h2>
            <span class="task-count" id="task-count">0</span>
          </div>

          <!-- Add Task -->
          <form class="add-task-form" id="add-task-form">
            <input
              type="text"
              class="task-input"
              id="task-input"
              placeholder="Add a task..."
              maxlength="100"
              aria-label="New task name"
            >
            <button type="submit" class="add-task-btn" aria-label="Add task">
              <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 5v14M5 12h14"/>
              </svg>
            </button>
          </form>

          <!-- Task List -->
          <ul class="task-list" id="task-list" role="list" aria-label="Task list">
            <!-- Tasks will be rendered here -->
          </ul>
        </section>

        <!-- Statistics Section -->
        <section class="stats-section" id="stats-section" aria-label="Statistics">
          <div class="section-header">
            <h2 class="section-title">Stats</h2>
          </div>
          <div class="stats-row">
            <div class="stat-item">
              <span class="stat-value" id="stat-sessions-today">0</span>
              <span class="stat-label">today</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
              <span class="stat-value" id="stat-focus-today">0m</span>
              <span class="stat-label">focus</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
              <span class="stat-value" id="stat-streak">0</span>
              <span class="stat-label">streak</span>
            </div>
            <div class="stat-divider"></div>
            <div class="stat-item">
              <span class="stat-value" id="stat-sessions-total">0</span>
              <span class="stat-label">total</span>
            </div>
          </div>
        </section>

        <!-- Session History -->
        <section class="history-section" id="history-section" aria-label="Session history">
          <button class="section-header section-toggle" id="history-toggle" aria-expanded="true" aria-controls="history-content">
            <h2 class="section-title">History</h2>
            <svg class="icon toggle-arrow" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M6 9l6 6 6-6"/>
            </svg>
          </button>
          <div class="history-content" id="history-content">
            <ul class="history-list" id="history-list" role="list" aria-label="Session history list">
              <!-- History items will be rendered here -->
            </ul>
            <p class="empty-state" id="history-empty">No sessions yet</p>
          </div>
        </section>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <span class="shortcut-hint">Press <kbd>?</kbd> for shortcuts</span>
  </footer>

  <!-- Settings Modal -->
  <div class="modal-overlay" id="customize-modal" role="dialog" aria-modal="true" aria-labelledby="customize-title" hidden>
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="customize-title">Settings</h2>
        <button class="modal-close" id="customize-close" aria-label="Close">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="settings-group">
          <h3 class="settings-group-title">Timer Duration</h3>
          <div class="settings-row">
            <label for="work-duration">Work</label>
            <div class="input-with-suffix">
              <input type="number" id="work-duration" min="1" max="60" value="25">
              <span class="input-suffix">min</span>
            </div>
          </div>
          <div class="settings-row">
            <label for="short-break-duration">Short Break</label>
            <div class="input-with-suffix">
              <input type="number" id="short-break-duration" min="1" max="60" value="5">
              <span class="input-suffix">min</span>
            </div>
          </div>
          <div class="settings-row">
            <label for="long-break-duration">Long Break</label>
            <div class="input-with-suffix">
              <input type="number" id="long-break-duration" min="1" max="60" value="15">
              <span class="input-suffix">min</span>
            </div>
          </div>
        </div>

        <div class="settings-group">
          <h3 class="settings-group-title">Notifications</h3>
          <div class="settings-row">
            <label for="setting-sound">Sound</label>
            <button type="button" class="toggle-switch" id="setting-sound" role="switch" aria-checked="true">
              <span class="toggle-switch-slider"></span>
            </button>
          </div>
          <div class="settings-row">
            <label for="setting-notifications">Browser Alerts</label>
            <button type="button" class="toggle-switch" id="setting-notifications" role="switch" aria-checked="false">
              <span class="toggle-switch-slider"></span>
            </button>
          </div>
          <div class="settings-row">
            <label for="setting-flash">Screen Flash</label>
            <button type="button" class="toggle-switch" id="setting-flash" role="switch" aria-checked="true">
              <span class="toggle-switch-slider"></span>
            </button>
          </div>
        </div>

        <div class="settings-group">
          <h3 class="settings-group-title">Data</h3>
          <div class="settings-row">
            <label>Clear History</label>
            <button type="button" class="btn btn-danger" id="clear-history-btn">Clear</button>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-ghost" id="customize-reset">Reset Defaults</button>
        <button class="btn btn-primary" id="customize-save">Save</button>
      </div>
    </div>
  </div>

  <!-- Help Modal -->
  <div class="modal-overlay" id="help-modal" role="dialog" aria-modal="true" aria-labelledby="help-title" hidden>
    <div class="modal">
      <div class="modal-header">
        <h2 class="modal-title" id="help-title">Keyboard Shortcuts</h2>
        <button class="modal-close" id="help-close" aria-label="Close">
          <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="modal-body">
        <div class="shortcuts-list">
          <div class="shortcut-item"><kbd>Space</kbd><span>Start / Pause</span></div>
          <div class="shortcut-item"><kbd>R</kbd><span>Reset session</span></div>
          <div class="shortcut-item"><kbd>N</kbd><span>Next session</span></div>
          <div class="shortcut-item"><kbd>S</kbd><span>Stop timer</span></div>
          <div class="shortcut-item"><kbd>A</kbd><span>Add task</span></div>
          <div class="shortcut-item"><kbd>1-9</kbd><span>Toggle task</span></div>
          <div class="shortcut-item"><kbd>T</kbd><span>Change theme</span></div>
          <div class="shortcut-item"><kbd>M</kbd><span>Mute sound</span></div>
          <div class="shortcut-item"><kbd>C</kbd><span>Settings</span></div>
          <div class="shortcut-item"><kbd>Esc</kbd><span>Close modal</span></div>
        </div>
        <div class="gestures-info">
          <h3>Touch Gestures</h3>
          <p>Swipe left to skip, right to reset</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container" aria-live="polite" aria-atomic="true"></div>

  <!-- Mobile Bottom Sheet -->
  <div class="bottom-sheet-overlay" id="bottom-sheet-overlay" hidden></div>
  <div class="bottom-sheet" id="bottom-sheet" hidden>
    <div class="bottom-sheet-handle"></div>
    <div class="bottom-sheet-header">
      <h2>Tasks</h2>
      <button class="modal-close" id="bottom-sheet-close" aria-label="Close">
        <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
    </div>
    <div class="bottom-sheet-content" id="bottom-sheet-content"></div>
  </div>

  <!-- Mobile Task Button -->
  <button class="mobile-task-btn" id="mobile-task-btn" aria-label="Open tasks" hidden>
    <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <path d="M9 11l3 3L22 4"/>
      <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
    </svg>
    <span>Tasks</span>
  </button>

  <script src="app.js"></script>
</body>
</html>
